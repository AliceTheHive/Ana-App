<h2 md-dialog-title>Publish server connections</h2>
<md-dialog-content>
    <div class="center-block center-content">
        <md-card [hidden]="savedConnections.length!=0" class="text-center">
            <h4>Looks like you don't have any saved publish server connections. <br /> Start by adding one.</h4>
        </md-card>

        <md-accordion [hidden]="savedConnections.length==0">
            <md-expansion-panel *ngFor="let conn of savedConnections; let i = index">
                <md-expansion-panel-header>
                    <md-panel-title>
                        <md-icon>insert_link</md-icon>&nbsp;
                        {{connectionAlias(conn)}}
                    </md-panel-title>
                </md-expansion-panel-header>

                <md-form-field>
                    <input mdInput type="text" placeholder="Name" [(ngModel)]="conn.Name" name="connName-{{i}}">
                </md-form-field>

                <md-form-field>
                    <input mdInput type="url" placeholder="Server Url" [(ngModel)]="conn.ServerUrl" name="connUrl-{{i}}">
                </md-form-field>

                <section>
                    <h5 [hidden]="!conn.ChatProjects || conn.ChatProjects.length<=0">Chat projects</h5>
                    <md-accordion>
                        <md-expansion-panel *ngFor="let proj of conn.ChatProjects; let i = index">
                            <md-expansion-panel-header>
                                <md-panel-title>
                                    <md-icon>chat</md-icon>&nbsp;
                                    {{proj.Name}}
                                </md-panel-title>
                            </md-expansion-panel-header>
                            <md-form-field>
                                <input mdInput type="text" placeholder="Chat Project Id" [(ngModel)]="proj.Id" name="projId-{{i}}">
                            </md-form-field>

                            <md-form-field>
                                <input mdInput type="text" placeholder="Chat Project Name" [(ngModel)]="proj.Name" name="projName-{{i}}">
                            </md-form-field>

                            <md-action-row>
                                <button md-raised-button (click)="deleteProject(proj)"><span>Delete Project</span></button>
                            </md-action-row>
                        </md-expansion-panel>
                    </md-accordion>
                </section>
                <md-action-row>
                    <button md-raised-button (click)="addChatProjectToConn(conn)"><span>Add chat project</span></button>
                    <button md-raised-button (click)="deleteConnection(conn)"><span>Delete server connection</span></button>
                </md-action-row>

            </md-expansion-panel>
        </md-accordion>
    </div>
</md-dialog-content>
<md-dialog-actions>
    <button mdTooltip="Save Changes" color="primary" [hidden]="savedConnections.length==0" md-raised-button (click)="saveConnections()">Save changes</button>
    <button mdTooltip="Add new connection" md-raised-button (click)="addConnection()">Add new server connection</button>
    <button md-raised-button md-dialog-close>Dismiss</button>
</md-dialog-actions>